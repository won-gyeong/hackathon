<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Survey Home</title>
    <link rel="stylesheet" href="../static/home.css" />
  </head>
  <body>
    <header>
        <h1>ğŸ¯KUTIğŸ¯</h1>
        <p>â“â”ëŒ€ë™ì œë¥¼ ì¦ê¸°ëŠ” ë‚˜ì˜ ìœ í˜•ì€â”â“</p>
    </header>

    <main>
    </br></br>
      <div class="ment">"ë¹„ìŠ·í•œ ìœ í˜•ì˜ ì‚¬ëŒë“¤ê³¼ ëŒ€ë™ì œë¥¼ í•¨ê»˜ ì¦ê²¨ë³´ì„¸ìš” !"</div>
      </br></br></br></br>
      <div id="formContainer">
        <input
          class="name-input"
          type="text"
          name="name"
          placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”"
        />
        <button class="name-button" onclick="setName()">Send </button>
      </div>
    </br></br>

      <div id="nameDisplay"></div>
      <a href="{% url 'survey' %}" class="cta-button">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°!</br>
        <div class="totalParticipants">
          í˜„ì¬ ì´ {{ total_participants }}ëª…ì´ ì°¸ê°€í–ˆì–´ìš”.
        </div>
      </a>
    </main>
    

    <script>
      const formContainer = document.getElementById("formContainer");
      const nameDisplay = document.getElementById("nameDisplay");
      const nameInput = document.querySelector('input[name="name"]');
      const nameButton = document.querySelector(".name-button");

      function setName() {
        const name = nameInput.value;

        window.localStorage.setItem("name", name);
        nameInput.value = "";
        checkName();
      }

      function checkName() {
        const name = window.localStorage.getItem("name");
        if (name) {
          formContainer.style.display = "none";
          nameDisplay.innerHTML = name + "ë‹˜ ì•ˆë…•í•˜ì„¸ìš”ğŸ¥³";
        } else {
          nameDisplay.style.display = "none";
          nameDisplay.innerHTML = "";
        }
      }

      const name = () => {
        fetch("", {
          method: "POST",
          body: JSON.stringify({
            name: nameInput.value,
          }),
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            const total_participants = data["total_participants"];

            const totalParticipants =
              document.querySelector(".totalParticipants");

            nameInput.value = "";
          });
      };

      nameButton.addEventListener("click", name);
    </script>
  </body>
</html>